const N5_UNITS = {
    CS: [
        { url: "/HTML/N5/CS/DataRep/NumberRep.html", title: "Number Representation" },
        { url: "/HTML/N5/CS/DataRep/GraphicRep.html", title: "Graphic Representation" },
        { url: "/HTML/N5/CS/DataRep/TextRep.html", title: "Text Representation" },
        { url: "/HTML/N5/CS/Architecture/Processor.html", title: "Data Flow and the Processor" },
        { url: "/HTML/N5/CS/Architecture/Memory.html", title: "Memory" },
        { url: "/HTML/N5/CS/Architecture/Buses.html", title: "Buses" },
        { url: "/HTML/N5/CS/Architecture/InterpretersAndCompilers.html", title: "Interpreters and Compilers" },
        { url: "/HTML/N5/CS/SecPrec.html", title: "Security Precautions" },
        { url: "/HTML/N5/CS/Environmental.html", title: "Environmental Impact" }
    ],
    SDD: [
        { url: "/HTML/N5/SDD/Dev_Methods.html", title: "Development Methodologies" },
        { url: "/HTML/N5/SDD/analysis.html", title: "Analysis" },
        { url: "/HTML/N5/SDD/Design/pseudocode.html", title: "Pseudocode" },
        { url: "/HTML/N5/SDD/Design/flowcharts.html", title: "Flowcharts" },
        { url: "/HTML/N5/SDD/Design/structureDiagrams.html", title: "Structure Diagrams" },
        { url: "/HTML/N5/SDD/Design/userInterface.html", title: "User Interface Design" },
        { url: "/HTML/N5/SDD/Implementation/DataTypes.html", title: "Data Types" },
        { url: "/HTML/N5/SDD/Implementation/1DArrays.html", title: "1-D Arrays" },
        { url: "/HTML/N5/SDD/Implementation/AssignConcat.html", title: "Assignment and Concatenation" },
        { url: "/HTML/N5/SDD/Implementation/Arithemtic.html", title: "Arithmetic Operations" },
        { url: "/HTML/N5/SDD/Implementation/Selection.html", title: "Selection" },
        { url: "/HTML/N5/SDD/Implementation/Loops.html", title: "Loops" },
        { url: "/HTML/N5/SDD/Implementation/PreDefinedFunctions.html", title: "Pre-Defined Functions" },
        { url: "/HTML/N5/SDD/Implementation/InputVal.html", title: "Input Validation" },
        { url: "/HTML/N5/SDD/Implementation/RunningTotal.html", title: "Running Total within Loop" },
        { url: "/HTML/N5/SDD/Implementation/Traversing1DArray.html", title: "Traversing a 1-D Array" },
        { url: "/HTML/N5/SDD/Implementation/CombiningAlgorithms.html", title: "Combining Algorithms" },
        { url: "/HTML/N5/SDD/testing.html", title: "Testing" },
        { url: "/HTML/N5/SDD/evaluation.html", title: "Evaluation" }
    ],
    WDD: [
        { url: "/HTML/N5/WDD/analysis.html", title: "Analysis" },
        { url: "/HTML/N5/WDD/Design/websiteStructure.html", title: "Navigational Structure" },
        { url: "/HTML/N5/WDD/Design/wireframes.html", title: "Wireframes" },
        { url: "/HTML/N5/WDD/Design/copyright.html", title: "Copyright Laws" },
        { url: "/HTML/N5/WDD/Design/fileFormats.html", title: "File Formats and Compression" },
        { url: "/HTML/N5/WDD/Design/prototyping.html", title: "Prototyping" },
        { url: "/HTML/N5/WDD/Implementation/html/BasicTags.html", title: "Basic HTML Tags" },
        { url: "/HTML/N5/WDD/Implementation/html/ImageTags.html", title: "Image Tags" },
        { url: "/HTML/N5/WDD/Implementation/html/Links.html", title: "Links and Anchor Tags" },
        { url: "/HTML/N5/WDD/Implementation/html/audioVideo.html", title: "Audio and Video Tags" },
        { url: "/HTML/N5/WDD/Implementation/html/lists.html", title: "Lists" },
        { url: "/HTML/N5/WDD/Implementation/css/cssBasics.html", title: "CSS Basics" },
        { url: "/HTML/N5/WDD/Implementation/css/cssDeclarations.html", title: "CSS Declarations" },
        { url: "/HTML/N5/WDD/Implementation/css/ids-classes-divs.html", title: "IDs, Classes and Divs" },
        { url: "/HTML/N5/WDD/JavaScript.html", title: "JavaScript" },
        { url: "/HTML/N5/WDD/Testing.html", title: "Testing" },
        { url: "/HTML/N5/WDD/Evaluation.html", title: "Evaluation" }
    ],
    DDD: [
        { url: "/HTML/N5/DDD/DDD-Intro.html", title: "Databases Introduction" },
        { url: "/HTML/N5/DDD/DDD-Analysis.html", title: "Analysis" },
        { url: "/HTML/N5/DDD/GDPR.html", title: "GDPR" },
        { url: "/HTML/N5/DDD/ERD.html", title: "Entity Relationship Diagrams" },
        { url: "/HTML/N5/DDD/DataDictionary.html", title: "Data Dictionary Breakdown" },
        { url: "/HTML/N5/DDD/CreatingDataDict.html", title: "Creating a Data Dictionary" },
        { url: "/HTML/N5/DDD/Access/NewAccessDatabase.html", title: "Creating a New Database" },
        { url: "/HTML/N5/DDD/Access/FieldProperties.html", title: "Field Properties" },
        { url: "/HTML/N5/DDD/Access/DataValidation.html", title: "Data Validation" },
        { url: "/HTML/N5/DDD/Access/RelationalDatabases.html", title: "Relational Databases" },
        { url: "/HTML/N5/DDD/Access/SortingandSearching.html", title: "Sorting and Searching" },
        { url: "/HTML/N5/DDD/Access/Queries.html", title: "Queries" },
        { url: "/HTML/N5/DDD/Access/Criteria.html", title: "Queries - Search Criteria" },
        { url: "/HTML/N5/DDD/SQL/SQLIntro.html", title: "SQL Intro" },
        { url: "/HTML/N5/DDD/SQL/SELECT.html", title: "SELECT...WHERE...FROM" },
        { url: "/HTML/N5/DDD/SQL/INSERTINTO.html", title: "INSERT INTO...VALUES" },
        { url: "/HTML/N5/DDD/SQL/UPDATE.html", title: "UPDATE...SET...WHERE" },
        { url: "/HTML/N5/DDD/SQL/DELETE.html", title: "DELETE...FROM...WHERE" },
        { url: "/HTML/N5/DDD/SQL/Equi-Join.html", title: "Equi-Join" },
        { url: "/HTML/N5/DDD/DBTesting.html", title: "Testing" },
        { url: "/HTML/N5/DDD/DBEvaluation.html", title: "Evaluation" }
    ]
};

const HIGHER_UNITS = {
    CS: [
        { url: "/HTML/Higher/CS/DataRep/Integers.html", title: "Positive and Negative Integers" },
        { url: "/HTML/Higher/CS/DataRep/NumberRange.html", title: "Number Range" },
        { url: "/HTML/Higher/CS/DataRep/FloatingPoint.html", title: "Floating Point Representation" },
        { url: "/HTML/Higher/CS/DataRep/Graphic.html", title: "Graphic Representation" },
        { url: "/HTML/Higher/CS/DataRep/Text.html", title: "Text Representation" },
        { url: "/HTML/Higher/CS/Architecture/fetchExecute.html", title: "The Fetch-Execute Cycle" },
        { url: "/HTML/Higher/CS/Architecture/performance.html", title: "System Performance" },
        { url: "/HTML/Higher/CS/Security/CompMisuseAct.html", title: "The Computer Misuse Act 1990" },
        { url: "/HTML/Higher/CS/Security/OnlineThreats.html", title: "Online Threats" },
        { url: "/HTML/Higher/CS/Security/Encryption.html", title: "Encryption" },
        { url: "/HTML/Higher/CS/Environmental.html", title: "Environmental Impact" }
    ],
    SDD: [
        { url: "/HTML/Higher/SDD/DevMethodologies.html", title: "Development Methodologies" },
        { url: "/HTML/Higher/SDD/Analysis.html", title: "Analysis" },
        { url: "/HTML/Higher/SDD/Design/pseudocode.html", title: "Pseudocode" },
        { url: "/HTML/Higher/SDD/Design/structureDiagrams.html", title: "Structure Diagrams" },
        { url: "/HTML/Higher/SDD/Implementation/ParallelArrays.html", title: "Parallel Arrays" },
        { url: "/HTML/Higher/SDD/Implementation/ArraysOfRecords.html", title: "Arrays of Records" },
        { url: "/HTML/Higher/SDD/Implementation/Subroutines.html", title: "Subroutines" },
        { url: "/HTML/Higher/SDD/Implementation/VariableScope.html", title: "Variable Scope" },
        { url: "/HTML/Higher/SDD/Implementation/Substrings.html", title: "Substrings" },
        { url: "/HTML/Higher/SDD/Implementation/FileHandling.html", title: "File Handling" },
        { url: "/HTML/Higher/SDD/Implementation/PredefinedFunctions.html", title: "Pre-Defined Functions" },
        { url: "/HTML/Higher/SDD/Implementation/LinearSearch.html", title: "Linear Search" },
        { url: "/HTML/Higher/SDD/Implementation/FindMinMax.html", title: "Find Minimum and Maximum" },
        { url: "/HTML/Higher/SDD/Implementation/CountOccurences.html", title: "Count Occurrences" },
        { url: "/HTML/Higher/SDD/testing.html", title: "Testing" },
        { url: "/HTML/Higher/SDD/evaluation.html", title: "Evaluation" }
    ],
    WDD: [
        { url: "/HTML/Higher/WDD/analysis.html", title: "Analysis" },
        { url: "/HTML/Higher/WDD/Design/navStructure.html", title: "Navigational Structure" },
        { url: "/HTML/Higher/WDD/Design/wireframeLFP.html", title: "Wireframes and Low Fidelity Prototypes" },
        { url: "/HTML/Higher/WDD/Implementation/css/selectors.html", title: "Selectors" },
        { url: "/HTML/Higher/WDD/Implementation/css/boxModel.html", title: "The Box Model, Margins and Padding" },
        { url: "/HTML/Higher/WDD/Implementation/css/heightWidth.html", title: "Height and Width" },
        { url: "/HTML/Higher/WDD/Implementation/css/navBar.html", title: "Horizontal Navigation Bar" },
        { url: "/HTML/Higher/WDD/Implementation/css/float.html", title: "Float" },
        { url: "/HTML/Higher/WDD/Implementation/css/display.html", title: "Display" },
        { url: "/HTML/Higher/WDD/Implementation/html/SemanticTags.html", title: "Semantic Tags" },
        { url: "/HTML/Higher/WDD/Implementation/html/Forms.html", title: "Forms" },
        { url: "/HTML/Higher/WDD/Implementation/js/JavaScript.html", title: "JavaScript" },
        { url: "/HTML/Higher/WDD/testing.html", title: "Testing" },
        { url: "/HTML/Higher/WDD/evaluation.html", title: "Evaluation" }
    ],
    DDD: [
        { url: "/HTML/Higher/DDD/DDD-analysis.html", title: "Analysis" },
        { url: "/HTML/Higher/DDD/Design/N5Revision.html", title: "N5 Database Design Recap" },
        { url: "/HTML/Higher/DDD/Design/typesOfKeys.html", title: "Types of Keys" },
        { url: "/HTML/Higher/DDD/Design/ERDiagram.html", title: "Entity Relationship Diagrams" },
        { url: "/HTML/Higher/DDD/Design/EODiagram.html", title: "Entity Occurrence Diagrams" },
        { url: "/HTML/Higher/DDD/Design/queryDesign.html", title: "SQL Query Design" },
        { url: "/HTML/Higher/DDD/Implementation/N5Revision.html", title: "N5 Revision" },
        { url: "/HTML/Higher/DDD/Implementation/wildcards.html", title: "Wildcards" },
        { url: "/HTML/Higher/DDD/Implementation/aggFunctions.html", title: "Aggregate Functions" },
        { url: "/HTML/Higher/DDD/Implementation/groupBy.html", title: "GROUP BY" },
        { url: "/HTML/Higher/DDD/Implementation/multiUpdate.html", title: "UPDATE multiple fields" },
        { url: "/HTML/Higher/DDD/Implementation/queryInQuery.html", title: "Using Query Results" },
        { url: "/HTML/Higher/DDD/DDD-Testing.html", title: "Testing" },
        { url: "/HTML/Higher/DDD/DDD-Evaluation.html", title: "Evaluation" }
    ]
};

function initPageNavigation() {
    const currentPath = window.location.pathname;
    const allUnits = { ...N5_UNITS, ...HIGHER_UNITS };
    
    let currentUnit = null;
    let currentIndex = -1;

    for (const unitName in N5_UNITS) {
        const pages = N5_UNITS[unitName];
        const idx = pages.findIndex(p => currentPath.endsWith(p.url) || currentPath === p.url);
        if (idx !== -1) {
            currentUnit = pages;
            currentIndex = idx;
            break;
        }
    }

    if (currentIndex === -1) {
        for (const unitName in HIGHER_UNITS) {
            const pages = HIGHER_UNITS[unitName];
            const idx = pages.findIndex(p => currentPath.endsWith(p.url) || currentPath === p.url);
            if (idx !== -1) {
                currentUnit = pages;
                currentIndex = idx;
                break;
            }
        }
    }

    if (!currentUnit || currentIndex === -1) return;

    const contentEl = document.getElementById('content');
    if (!contentEl) return;

    const navContainer = document.createElement('div');
    navContainer.className = 'page-nav';

    const hasPrev = currentIndex > 0;
    const hasNext = currentIndex < currentUnit.length - 1;

    if (hasPrev) {
        const prevPage = currentUnit[currentIndex - 1];
        const prevBtn = document.createElement('a');
        prevBtn.href = prevPage.url;
        prevBtn.className = 'page-nav-btn page-nav-back';
        prevBtn.innerHTML = '&#9664; Back<span class="page-nav-title">' + prevPage.title + '</span>';
        prevBtn.addEventListener('click', function() { window.scrollTo(0, 0); });
        navContainer.appendChild(prevBtn);
    }

    if (hasNext) {
        const nextPage = currentUnit[currentIndex + 1];
        const nextBtn = document.createElement('a');
        nextBtn.href = nextPage.url;
        nextBtn.className = 'page-nav-btn page-nav-next';
        nextBtn.innerHTML = 'Next &#9654;<span class="page-nav-title">' + nextPage.title + '</span>';
        nextBtn.addEventListener('click', function() { window.scrollTo(0, 0); });
        navContainer.appendChild(nextBtn);
    }

    if (hasPrev || hasNext) {
        contentEl.appendChild(navContainer);
    }
}

window.addEventListener('load', function() {
    setTimeout(initPageNavigation, 300);
});
